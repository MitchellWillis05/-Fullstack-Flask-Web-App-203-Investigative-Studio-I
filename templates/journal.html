{%extends 'base.html'%}
    {%block content%}

        <body>
            <div class="journal-container">
                <div class="journal-header">
                    <h1>Your Journal</h1>
                    <button class="journal-add-entry-btn" onclick="openForm()"><strong>ADD  </strong><i class='bx bx-plus-medical'></i></button>
                </div>
                <table class="journal-table">
                    <thead>
                        <tr>
                            <th class="top-right-curve">Date</th>
                            <th>Title</th>
                            <th class="top-left-curve">Content</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr onclick="window.location='entry/1';">
                            <td>2023-06-12</td>
                            <td>Flying in the Sky</td>
                            <td>I was flying in the sky above a beautiful landscape...</td>
                        </tr>
                        <tr onclick="window.location='entry/2';">
                            <td>2023-06-13</td>
                            <td>A Visit to the Past</td>
                            <td>I visited my childhood home and relived old memories...</td>
                        </tr>
                        <!-- Additional entries can be added similarly -->
                    </tbody>
                </table>
            </div>

            <div class="journal-form-popup" id="newEntryForm">
                <form class="journal-form-container" action="{{ url_for('home') }}" method="POST">
                    <h2>New Dream Entry</h2>

                    <div class="journal-form-group">
                        <label for="title"><b>Title</b></label>
                        <input type="text" id="title" name="title" placeholder="Enter Title" required>
                    </div>

                    <div class="journal-form-group">
                        <label><b>Mood</b></label>
                        <div class="journal-mood-selector">
                            <button type="button" class="journal-mood-btn" onclick="selectMood(this)">ðŸ˜Š</button>
                            <button type="button" class="journal-mood-btn" onclick="selectMood(this)">ðŸ˜¢</button>
                            <button type="button" class="journal-mood-btn" onclick="selectMood(this)">ðŸ˜¡</button>
                            <button type="button" class="journal-mood-btn" onclick="selectMood(this)">ðŸ˜¨</button>
                            <button type="button" class="journal-mood-btn" onclick="selectMood(this)">ðŸ˜´</button>
                        </div>
                        <input type="hidden" id="mood" name="mood" required>
                    </div>

                    <div class="journal-form-group">
                        <label for="color"><b>Color</b></label>
                        <div class="journal-color-selector">
                            <!-- 24 colors as buttons -->
                            <button type="button" class="journal-color-btn" style="background-color: #FF6633;" onclick="selectColor(this, '#FF6633')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #FFB399;" onclick="selectColor(this, '#FFB399')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #FF33FF;" onclick="selectColor(this, '#FF33FF')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #FFFF99;" onclick="selectColor(this, '#FFFF99')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #00B3E6;" onclick="selectColor(this, '#00B3E6')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #E6B333;" onclick="selectColor(this, '#E6B333')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #3366E6;" onclick="selectColor(this, '#3366E6')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #999966;" onclick="selectColor(this, '#999966')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #99FF99;" onclick="selectColor(this, '#99FF99')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #B34D4D;" onclick="selectColor(this, '#B34D4D')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #80B300;" onclick="selectColor(this, '#80B300')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #809900;" onclick="selectColor(this, '#809900')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #E6B3B3;" onclick="selectColor(this, '#E6B3B3')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #6680B3;" onclick="selectColor(this, '#6680B3')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #66991A;" onclick="selectColor(this, '#66991A')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #FF99E6;" onclick="selectColor(this, '#FF99E6')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #CCFF1A;" onclick="selectColor(this, '#CCFF1A')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #FF1A66;" onclick="selectColor(this, '#FF1A66')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #E6331A;" onclick="selectColor(this, '#E6331A')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #33FFCC;" onclick="selectColor(this, '#33FFCC')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #66994D;" onclick="selectColor(this, '#66994D')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #B366CC;" onclick="selectColor(this, '#B366CC')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #4D8000;" onclick="selectColor(this, '#4D8000')"></button>
                            <button type="button" class="journal-color-btn" style="background-color: #B33300;" onclick="selectColor(this, '#B33300')"></button>
                        </div>
                        <input type="hidden" id="color" name="color" required>
                    </div>

                    <div class="journal-form-group">
                        <label for="content"><b>Content</b></label>
                        <textarea id="content" name="content" placeholder="Write your dream here..." required></textarea>
                    </div>

                    <button type="submit" class="journal-btn">Save</button>
                    <button type="button" class="journal-btn cancel" onclick="closeForm()">Close</button>
                </form>
            </div>

            <script>
                function openForm() {
                    document.getElementById("newEntryForm").style.display = "block";
                }

                function closeForm() {
                    document.getElementById("newEntryForm").style.display = "none";
                }

                function selectMood(button) {
                    document.querySelectorAll('.journal-mood-btn').forEach(btn => btn.classList.remove('selected'));
                    button.classList.add('selected');
                    document.getElementById('mood').value = button.textContent.trim();
                }

                function selectColor(button, color) {
                    document.querySelectorAll('.journal-color-btn').forEach(btn => btn.classList.remove('selected'));
                    button.classList.add('selected');
                    document.getElementById('color').value = color;
                }
            </script>
        </body>
    {%endblock%}
